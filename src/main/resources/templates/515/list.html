<div class="index-div" th:fragment="listFragment">
    <div class="list_wrap_one_wuy list_wrap list_wrap_one" style="display: block;" yn="1">
        <div class="list_content" id="list" th:if="${list}">


            <div id="item_list" th:each="item,count:${list}">
                <p class="date-p"
                   th:if="${(!item.getTop() && count.index==0)
                   || (!item.getTop() && count.index!=0  && #dates.day(item.getDate()) - #dates.day(list.get(count.index-1).getDate())!=0)
                   || (!item.getTop() && count.index!=0  && list.get(count.index-1).getTop())}"
                   th:text="${#dates.format(item.getDate(),'MM-dd')}"></p>
                <a th:class="${item.getTop() ? 'clearfix zhiding':'clearfix'}"

                   th:href="'/bofang/'+${item.getId()}">

                    <section class="clearfix jiabifeng" wuyd="">
                        <div class="changci" style="display: block;">
                            <cite class="noks">&nbsp;</cite></div>
                        <div class="bifeng">vs</div>
                        <div class="team zhudui zhudui_wuyd">
                            <span><img alt="" class="" th:src="${item.leftImg}" onerror="this.remove()"></span>
                            <p th:text="${item.leftName}">
                            </p>
                        </div>
                        <div class="center">
                            <p class="eventtime_wuy eventtime">
                            <span class="feleimg">
                                <img th:src="${item.getLiveType()==1?'/515/img/fenlei_1.png':'/515/img/fenlei_2.png'}"/>
                            </span>
                                <span><em th:text="${item.gameName}"></em> <i
                                        style="white-space: nowrap; overflow: visible;"
                                        th:text="${(#dates.day(item.getDate()) - #dates.day(#dates.createToday())==0) ? #dates.format(item.getDate(),'HH:mm') : #dates.format(item.getDate(),'MM-dd HH:mm')}">
                              </i> </span></p>
                            <p class="vsp">VS</p>
                            <p th:class="${item.getLiveing()}?'video zb_green':'video'"><i
                                    class="video-icon"></i>
                                <span>视频直播</span>
                            </p>
                        </div>
                        <div class="team kedui">
                            <span><img alt=""
                                       class=""
                                       th:src="${item.rightImg}" onerror="this.remove()"></span>
                            <p th:text="${item.rightName}"></p>
                        </div>
                    </section>
                </a>
            </div>
        </div>
        <div class="clcik_more" th:unless="${#lists.isEmpty(list)}" th:onclick="loadmore([[${listtype}]])">点击加载更多</div>
        <div class="more_animate" style="display: none;">︾</div>

    </div>


    <script>
        var count = 0

        function loadmore(type) {
            count++;
            $.ajax({
                url: "/loadmore",
                type: "GET",
                contentType: "application/html",
                dataType: "html",
                data: {liveType:type,page:count},
                success: function (result) {
                    if(result){
                        $("#list").append(result)
                    }else{
                        $(".clcik_more").text("没有更多数据了")
                    }
                },
                error: function (errormsg) {
                    $(".clcik_more").text("没有更多数据了")
                }
            });
        }


    </script>
</div>
